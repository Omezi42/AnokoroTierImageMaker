<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tier表アイコンジェネレーター</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', 'Helvetica Neue', 'Arial', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Meiryo', 'sans-serif'; }
        .card-image { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; cursor: pointer; }
        .card-image:hover { transform: scale(1.05); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .selected-card { border: 4px solid #4f46e5; box-shadow: 0 0 15px rgba(79, 70, 229, 0.5); }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-6xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900">Tier表アイコンジェネレーター</h1>
            <p class="mt-2 text-lg text-gray-600">『あの頃の自作TCG』のカードを検索して、オリジナルのTier表アイコンを作成しよう！</p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="space-y-8">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-4">1. 背景のカードを選ぶ</h2>
                    <input type="text" id="background-search" placeholder="カード名を入力" class="w-full px-4 py-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" oninput="searchCard('background')">
                    <div id="background-results" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 h-64 overflow-y-auto bg-gray-50 p-4 rounded-lg border"></div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-4">2. 右下のサブカードを選ぶ</h2>
                    <input type="text" id="sub-search" placeholder="カード名を入力" class="w-full px-4 py-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" oninput="searchCard('sub')">
                    <div id="sub-results" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 h-64 overflow-y-auto bg-gray-50 p-4 rounded-lg border"></div>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-lg flex flex-col items-center justify-center">
                <h2 class="text-2xl font-bold mb-4">3. アイコンを生成する</h2>
                <div class="w-full max-w-xs aspect-square bg-gray-200 rounded-lg mb-4 flex items-center justify-center border-2 border-dashed">
                     <canvas id="canvas" width="512" height="512" class="w-full h-full rounded-lg hidden"></canvas>
                     <div id="preview-placeholder" class="text-gray-500 text-center p-4">
                        <p>ここにプレビューが表示されます</p>
                    </div>
                </div>
                <button id="generate-btn" onclick="generateIcon()" class="w-full max-w-xs bg-green-500 text-white font-bold px-6 py-3 rounded-lg hover:bg-green-600 transition-colors text-lg disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>生成する</button>
                <a id="download-link" class="w-full max-w-xs mt-4 bg-gray-800 text-white text-center font-bold px-6 py-3 rounded-lg hover:bg-gray-900 transition-colors hidden">画像をダウンロード</a>
            </div>
        </main>
    </div>

    <script>
        // ===================================================================================
        // ▼▼▼ ここに generator.html で生成したカード名リストを貼り付けます ▼▼▼
        // ===================================================================================

        const cardNames = [
    "おちゃめな魔法使い（プロモ）",
    "かたい貝",
    "かにもぐら先輩",
    "かわいいあざらし",
    "ぬらりひょん",
    "はりねずみ",
    "はりトラップ",
    "アイアンローダー",
    "アイスドラゴン",
    "アクセラモーター",
    "アックスゾンビ",
    "アマビエ",
    "イノシシ",
    "インパクトエネルギー",
    "インパクトガイド",
    "ウサギ",
    "ウミガメ",
    "エレメンタルエルフ",
    "オオカミ",
    "オーガ",
    "オーバーエネルギー",
    "カバ",
    "ガーゴイル",
    "キュアエネルギー",
    "キュリアス海",
    "ギガドラゴン",
    "クリスタルドラゴン",
    "グランドエネルギー",
    "コウモリ",
    "コバンザメ",
    "ゴブリン突撃！",
    "ゴーレム",
    "サウザンドラゴン",
    "サソリ",
    "サンエネルギー",
    "ザコ魔法陣",
    "シカ",
    "シビレナマズ",
    "スマッシュエネルギー",
    "スライム",
    "スライムタンク",
    "スーパードラゴン",
    "ゼウス",
    "ソラトビペンギン",
    "ソリッドスライム",
    "ゾンビドラゴン",
    "ゾンビレックス",
    "タ―ジンバ海岸",
    "ダメージエネルギー",
    "ダークエネルギー",
    "チビドラゴン",
    "テントウムシ",
    "ディエティの月明",
    "デカスライム",
    "トライデントマスター",
    "ドラゴン",
    "ドローエネルギー",
    "ネクロマンサー",
    "ノーマルエネルギー",
    "ハイドロエネルギー",
    "ハブタエラプトル",
    "ハンドレッドラゴン",
    "バブルスライム",
    "バーンドラゴン",
    "パワーエネルギー",
    "ヒツジ",
    "ヒールエネルギー",
    "ファイアドラゴン",
    "フェアリー",
    "フォレストエネルギー",
    "ブラックグリフォン",
    "ブレイズスラスター",
    "ブレイズドラゴン",
    "ブレイブエネルギー",
    "ブレードゾンビ",
    "ブーストエネルギー",
    "プラスラッシャー",
    "ヘビ",
    "ヘヴンエネルギー",
    "ホワイトグリフォン",
    "ボムゾンビ",
    "ボルケーノエネルギー",
    "ポイズンゾンビ",
    "マイナスナイパー",
    "マスターゴブリン",
    "マリンエネルギー",
    "ミノタウロス",
    "ラヴァエネルギー",
    "リチャージエネルギー",
    "リヴァイアサン",
    "レインボーマジシャン",
    "レイヴンエネルギー",
    "ワイバーン",
    "万緑の巨象",
    "三剣の意志",
    "丸太のゴーレム",
    "丸太騙し",
    "二者択双",
    "亞の祠",
    "人喰い鮫",
    "人工生命 448号",
    "人形の一撃",
    "人魚の涙",
    "仮面英雄バンブート",
    "休息",
    "供物魔法陣",
    "信じる心",
    "傘化け",
    "傷薬",
    "働きアリ",
    "光のカーテン",
    "光の蝕み",
    "光天使ナディ",
    "六星門",
    "共鳴",
    "兵隊アリ",
    "再起の天使",
    "冒険者",
    "冷たき愛",
    "凍りスライム",
    "凍土の王",
    "凶暴化",
    "刀羽のプテラ",
    "刃尾の竜",
    "初級魔法の教え",
    "剛健なツリーフォーク",
    "剣ゴブリン",
    "力の吸収",
    "南瓜の魔物",
    "原始の種",
    "原石杖の魔術師",
    "双鋏型掘削機",
    "双頭ゾンビ",
    "古びた加速部品",
    "古びた地図",
    "古びた検知部品",
    "古びた航海図",
    "古びた駆動部品",
    "古代樹の魔物",
    "呪書の悪魔",
    "呪術の仮面",
    "呼竜術",
    "命の天樹",
    "回生の天使",
    "回生の天使（プロモ）",
    "回転刃",
    "因幡の白うさぎ",
    "地割れ",
    "堅盾のトリケラ",
    "増殖研究",
    "夜の騎士",
    "夢見屋 亡者＆研究者",
    "大槍角の鮫",
    "大盾の幽霊",
    "大翼のハーピー",
    "大胆な潜伏",
    "大自然の超越",
    "大蛇",
    "天使スライム",
    "天啓",
    "天界の泉",
    "天竜剣",
    "天逆鉾の破片",
    "天鎧竜ウラノス",
    "天鎧騎士シエロ",
    "女王蟻",
    "子供オーガ",
    "安息の導き",
    "完全燃焼",
    "宝石姫サファイア",
    "宝石姫トパーズ",
    "宝石姫ルビー",
    "宵闇の水面",
    "封印されし悪魔像",
    "尖晶石の人形",
    "尖晶石の精霊",
    "屍動鬼",
    "山脈崩し",
    "山麓の補給兵",
    "岩の人形",
    "崖上からの奇襲",
    "崖上の防衛砦",
    "巨大な門",
    "帯電の矢",
    "平穏の使者",
    "幸運を呼ぶ鳥",
    "幽体化",
    "弩弓の騎士",
    "弱者の嘆き",
    "弱者の爆発",
    "弱者の結束",
    "彩戦紙インディゴ",
    "彩戦紙トパーズ",
    "彩戦紙ネイビー",
    "彩戦紙マゼンタ",
    "彼岸の精霊 カナロア",
    "彼岸の魔女 リリィ",
    "徴兵",
    "怠惰な海賊嬢",
    "怪力の甲虫",
    "怪物蟹",
    "怪竜の書",
    "悪意の芽吹",
    "悪戯フェアリー",
    "悪魔な注文",
    "惨然槍の邪竜",
    "慈愛フェアリー",
    "成長",
    "戒律の僧",
    "戦車ゴブリン",
    "戦闘兵器：B",
    "戦闘兵器：C",
    "戦闘兵器：H（プロモ）",
    "戦闘兵器：SR",
    "手鏡の幽霊",
    "抵抗",
    "招かれざる恐怖",
    "拡散炎",
    "掌握",
    "採掘ゴブリン",
    "撞木鮫",
    "整備",
    "斧の戦士",
    "新緑の石碑",
    "旗持ちの騎士",
    "日傘の海賊嬢",
    "旧式機械装甲",
    "星になる",
    "暗殺",
    "暴牙のティラノ",
    "最終兵器：MS",
    "月光の天使",
    "月宿る海",
    "月迎え",
    "木の宝箱",
    "木立火",
    "林道の亡霊",
    "枯れ木の魔物",
    "栄華の花園",
    "桜小鳥",
    "棒ゴブリン",
    "森の脅威",
    "森の贄",
    "森の雫",
    "森焼き",
    "極彩戦紙アマル",
    "極彩鳥の巣",
    "樹葉の幽霊",
    "武装強化",
    "歪な氷像",
    "死体漁り",
    "死神の石柱",
    "毒入り傷薬",
    "毒殺",
    "毒沼の竜",
    "毒波",
    "水の精霊",
    "水の魔法使い",
    "水の魔法使い（プロモ）",
    "水鉄砲ゴブリン",
    "氷の雨",
    "氷壁",
    "泉の水瓶",
    "泡の異形",
    "波竜術",
    "洞窟の悪魔",
    "活竜術",
    "海坊主",
    "海底探査",
    "海賊砲",
    "海賊船",
    "海賊長ヴァルロス",
    "海風の略奪者",
    "消耗品",
    "深海の禍根",
    "深青の大鯨",
    "混濁",
    "湖畔の幽霊",
    "火の輪",
    "火の魔法使い",
    "火口のヌシ",
    "火山弾",
    "火炎式魔力砲",
    "火花",
    "火薬の悪魔",
    "火車",
    "灰の大地",
    "災いの渦潮",
    "災厄",
    "炎の精霊",
    "炎剣の騎士",
    "炎天使ジダ",
    "炎鱗の鮫",
    "炎鱗双剣",
    "炎鱗狩りの剣士",
    "炎鱗竜プロクス",
    "点火",
    "無の創造",
    "無形の霊術師",
    "無限の恵沢",
    "焦げスライム",
    "焼き魚",
    "焼却",
    "煌めく尖晶石",
    "熟達の女騎士",
    "燃えトカゲ",
    "燃天の熾天使",
    "爆発",
    "爆発魚",
    "獣使い",
    "王国の参謀",
    "王国の弓騎士",
    "王国の槍騎士",
    "王国の騎士団長",
    "甘誘の悪魔",
    "畏怖の紋章",
    "疑似餌付き",
    "白蛇",
    "白詰草の魔物",
    "白魔の訪れ",
    "百鬼夜行",
    "盗み",
    "盾鋏の蟹",
    "知識の波",
    "短剣の騎士",
    "石の剣",
    "石ゴブリン",
    "石鎚の鍛治師",
    "砂浜のゴーレム",
    "破邪の天使",
    "碑獣の刻石",
    "碑獣アリオール",
    "碑獣ガリル",
    "碑獣タイタン",
    "碑獣ヴィファル",
    "碧い花",
    "祈りの天使像",
    "神秘への遭遇",
    "禁忌の錬成",
    "秘薬の治療師",
    "突風",
    "竜術師",
    "竜討毒の鳥",
    "竹の魔物",
    "笑うエイ",
    "篝火の幽霊",
    "籠罠",
    "糸動奇 柱",
    "糸動奇 環",
    "糸動奇 箱",
    "糸動源",
    "紅天狗茸の魔物",
    "紅蓮球",
    "紅魚",
    "紫月昇り",
    "絵画の幽霊",
    "絶対神",
    "絶望の招来",
    "網罠",
    "緊急発進台",
    "緑の大地",
    "緑化",
    "縄刃投げ",
    "縛り上げ",
    "繁栄",
    "繁茂する根",
    "羊歯の魔物",
    "翠の古代魚",
    "翠鱗のパラサウロロフス",
    "翼落とし",
    "腐りスライム",
    "腹ごしらえ",
    "自律機シップマン",
    "自律機パイルマン",
    "自律機フォースマン",
    "自立機カメラマン",
    "自立機ジャンクマン",
    "自立機スイッチマン",
    "自立機タイヤマン",
    "自立機トラックマン",
    "自立機ファイアマン",
    "自走式裁断機",
    "船霊逆浪海域",
    "色彩共鳴",
    "苔のゴーレム",
    "草の魔物",
    "華乙女ベゴニア",
    "落とし穴",
    "落石",
    "蒸気機関の古代機",
    "蒼魚",
    "藪蛇",
    "蝿取草の魔物",
    "融解",
    "蟻司令官",
    "蠢く墓場",
    "血の鎌使い",
    "裁きの日",
    "裂爪のラプトル",
    "補給物資",
    "角笛",
    "解体遊び",
    "討伐依頼",
    "詠唱魔方陣・奔流",
    "詠唱魔方陣・野生",
    "誓いの天使",
    "豊穣の女神",
    "赤蛇",
    "超爆発",
    "超臨界",
    "転換",
    "軽魔法陣詠唱機",
    "輝化",
    "輪廻転生",
    "轟雷",
    "追放",
    "遺跡の護り手",
    "還り門の森",
    "還元",
    "部隊指揮官",
    "酒呑童子",
    "酸性雨",
    "金貨の悪魔",
    "釣り人",
    "釣果",
    "鈍化",
    "鉄鎧のアンキロ",
    "銀雪の幼竜",
    "銀雪の灰竜",
    "銀雪の白竜",
    "銀雪の蒼竜",
    "銀雪夜",
    "銅剣の騎士",
    "鋼翼の竜",
    "錆のランタン",
    "鍵の精霊",
    "鎧ゴブリン",
    "開花",
    "闇の誘惑",
    "闇の誘惑（プロモ）",
    "闇討ち",
    "陽光の獅子",
    "階級制度",
    "集団戦法",
    "雪女",
    "雲のゴーレム",
    "雷神",
    "雷鳴の天馬",
    "霊魂の世",
    "霧中",
    "青空ゴブリン",
    "頑強な機兵",
    "願いの泉",
    "風化",
    "風読みのハーピー",
    "飛びナイフ",
    "鬼火",
    "魂の復元",
    "魂宿りの巨剣",
    "魔力の小瓶",
    "魔力の盃",
    "魔力炉",
    "魔法陣詠唱機",
    "魔石の精霊",
    "魔石を統べる精霊王",
    "魔術書",
    "魔術書庫",
    "魚群魔法陣",
    "鮮赤の不死鳥",
    "鳥飼いの魔女",
    "鵺",
    "黄金蟹",
    "黎明の天使",
    "黒い花"
];
        
        // ===================================================================================
        // ▲▲▲ ここから上のエリアに貼り付けてください ▲▲▲
        // ===================================================================================


        const IMAGE_FOLDER = 'images';
        const IMAGE_SUFFIX = '_transparent.png';
        let selectedBackgroundCard = null;
        let selectedSubCard = null;

        function getImagePath(name) {
            return `${IMAGE_FOLDER}/${encodeURIComponent(name)}${IMAGE_SUFFIX}`;
        }
        
        window.onload = function() {
            if (cardNames.length === 0) {
                document.getElementById('background-results').innerHTML = '<p class="col-span-full text-center text-red-500">カードリストが空です。`index.html`にカード名リストを貼り付けてください。</p>';
                document.getElementById('sub-results').innerHTML = '<p class="col-span-full text-center text-red-500">カードリストが空です。`index.html`にカード名リストを貼り付けてください。</p>';
            } else {
                displayResults(cardNames, 'background');
                displayResults(cardNames, 'sub');
            }
        };

        function searchCard(type) {
            const input = document.getElementById(`${type}-search`);
            const searchTerm = input.value.toLowerCase().trim();
            const filteredNames = cardNames.filter(name => name.toLowerCase().includes(searchTerm));
            displayResults(filteredNames, type);
        }

        function displayResults(names, type) {
            const resultsContainer = document.getElementById(`${type}-results`);
            resultsContainer.innerHTML = '';

            if (!names || names.length === 0) {
                resultsContainer.innerHTML = '<p class="col-span-full text-center text-gray-500">カードが見つかりませんでした。</p>';
                return;
            }

            names.forEach(name => {
                const imagePath = getImagePath(name);
                const img = document.createElement('img');
                img.src = imagePath;
                img.alt = name;
                img.title = name;
                img.className = 'w-full h-auto object-cover rounded-md card-image';
                img.onclick = () => selectCard(imagePath, type, img);
                
                img.onerror = function() {
                    this.onerror=null;
                    this.src='https://placehold.co/400x400/ef4444/ffffff?text=画像なし';
                    this.title = `${name} の画像が見つかりません`;
                    this.style.cursor = 'not-allowed';
                    this.onclick = null;
                };

                if ((type === 'background' && imagePath === selectedBackgroundCard) || (type === 'sub' && imagePath === selectedSubCard)) {
                    img.classList.add('selected-card');
                }
                resultsContainer.appendChild(img);
            });
        }

        function selectCard(imagePath, type, selectedImgElement) {
            const resultsContainer = document.getElementById(`${type}-results`);
            const allImages = resultsContainer.querySelectorAll('img');
            allImages.forEach(img => img.classList.remove('selected-card'));
            selectedImgElement.classList.add('selected-card');

            if (type === 'background') {
                selectedBackgroundCard = imagePath;
            } else {
                selectedSubCard = imagePath;
            }
            checkIfReadyToGenerate();
        }
        
        function checkIfReadyToGenerate() {
            const generateBtn = document.getElementById('generate-btn');
            generateBtn.disabled = !(selectedBackgroundCard && selectedSubCard);
        }

        function generateIcon() {
            if (!selectedBackgroundCard || !selectedSubCard) return;

            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            const canvasSize = 512;
            canvas.width = canvasSize;
            canvas.height = canvasSize;

            document.getElementById('preview-placeholder').classList.add('hidden');
            canvas.classList.remove('hidden');

            const bgImage = new Image();
            bgImage.crossOrigin = 'Anonymous';
            bgImage.src = selectedBackgroundCard;

            bgImage.onload = () => {
                ctx.drawImage(bgImage, 0, 0, canvasSize, canvasSize);
                const subImage = new Image();
                subImage.crossOrigin = 'Anonymous';
                subImage.src = selectedSubCard;
                subImage.onload = () => {
                    const subSize = canvasSize / 5;
                    const subX = canvasSize - subSize;
                    const subY = canvasSize - subSize;
                    ctx.drawImage(subImage, subX, subY, subSize, subSize);
                    const downloadLink = document.getElementById('download-link');
                    downloadLink.href = canvas.toDataURL('image/png');
                    downloadLink.download = 'tier_icon.png';
                    downloadLink.classList.remove('hidden');
                };
            };
        }
    </script>

</body>
</html>
